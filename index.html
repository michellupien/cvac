<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<style>
		body {
			font-family: verdana, arial, sans-serif;
			color:#303030;
			font-size:small;
		}

		div.main {
			max-width:500px;
			margin: auto;
			<!-- border: 3px solid #73AD21; -->
		}	
	
		table {
			border-collapse: collapse;
			width: 100%;
		}

		th {
			padding-top: 12px;
			padding-bottom: 12px;
			text-align: center;
			background-color: lightgray;
		}

		th, td {
			border: 1px solid gray;
			padding: 8px;		
			text-align: center;
		}
		
		tr:hover {background-color:#eee;}
	</style>
</head>

<body>

<div class="main">
	<h2>Tuyaux de gicleurs - Méthode Hazen Williams</h2>
	<p>Débit (gpm):<span id="Erreur1" style="color:red"></span></p>
	<input id="gpm" value="100"><br>
	<p>Facteur C (de 60 à 160):<span id="Erreur2" style="color:red"></span></p>
	<input id="C" value="120" ><br><br>
	<button type="button" onclick="Calculer()">Calculer</button>
	
	<h3>Tuyau SCH 10 - Vitesse et friction</h3>
	<p id="Titre1"></p>
	<table id="Table_SCH10">
		<tr>
			<th>NPS</th>
			<th>pi/s</th>
			<th>psi/pi</th>
		</tr>	  
	</table>
	
	<h3>Tuyau SCH 40 - Vitesse et friction</h3>
	<p id="Titre2"></p>	
	<table id="Table_SCH40">
		<tr>
			<th>NPS</th>
			<th>pi/s</th>
			<th>psi/pi</th>
		</tr>	  
	</table>

</div>

<script>

	function Calculer(){
		Validate("gpm","Erreur1",1,1000000000);
		Validate("C","Erreur2",60,160);
		var err1=document.getElementById("Erreur1").textContent;
		var err2=document.getElementById("Erreur2").textContent;
		if (err1=="" && err2 =="") {
			Hazen("Table_SCH10");
			Hazen("Table_SCH40");
		}
		var gpm1=document.getElementById("gpm").value;
		var C1=document.getElementById("C").value;
		var Titre=" "+gpm1+" gpm "+" C= "+C1; 
		document.getElementById("Titre1").innerHTML = Titre;
		document.getElementById("Titre2").innerHTML = Titre;
	}
;
	function Validate(IdInput,IdErreur,min,max) {
		var x = document.getElementById(IdInput).value;
		// If x is Not a Number or less than one or greater than 10
		if (isNaN(x) || x < min || x > max) {
			document.getElementById(IdErreur).innerHTML = "Valeur invalide";
		} else {
			document.getElementById(IdErreur).innerHTML = "";
		}
	}
		
	function Hazen(IdTable) {
		var table = document.getElementById(IdTable);
		for(var i = table.rows.length - 1; i > 0; i--){
			table.deleteRow(i);
		}
		for (i = 0; i < 35; i++) {
			var OD1=OD[i];
			if (IdTable=="Table_SCH10"){
				var WT1 = SCH10[i];
			}
			if (IdTable=="Table_SCH40"){
				var WT1 = SCH40[i];
			}
			var ID1 = OD1-WT1-WT1;
			var gpm1 = document.getElementById("gpm").value;
			var C1=document.getElementById("C").value;
			var CubicfeetPerSec = gpm1 * 0.002228;
            var InsideArea = Math.pow(ID1 / 12,2) * 3.1415 / 4;
            var WaterVelocity = (CubicfeetPerSec / InsideArea);
			var HazenPressureLoss = Math.pow((4.52 * gpm1),1.85) / (Math.pow(C1,1.85) * Math.pow(ID1,4.87));
			if (WaterVelocity<=50 && HazenPressureLoss>=0.001){
				switch (NPS[i]) {
					case "1/8":
					case "1/4":
					case "3/8":
					case "1/2":
					case "3/4":
					case "3 1/2":
					case "5":
						break;
					default:
						var row = table.insertRow(-1);
						var cell1 = row.insertCell(0);
						var cell2 = row.insertCell(1);
						var cell3 = row.insertCell(2);
						cell1.innerHTML = NPS[i];
						cell2.innerHTML = WaterVelocity.toFixed(1);
						cell3.innerHTML = HazenPressureLoss.toFixed(3);
						break;
				}
			}	
		}
	}
	
</script>

<script>
var NPS=["1/8","1/4","3/8","1/2","3/4","1","1 1/4","1 1/2","2","2 1/2","3","3 1/2","4","5","6","8","10","12","14","16","18","20","22","24","26","28","30","32","34","36","38","40","42","44","46","48"]
var DN=[6,8,10,15,20,25,32,40,50,65,80,90,100,125,150,200,250,300,350,400,450,500,550,600,650,700,750,800,850,900,950,1000,1050,1100,1150,1200]
var OD=[0.405,0.540,0.675,0.840,1.050,1.315,1.660,1.900,2.375,2.875,3.500,4.000,4.500,5.563,6.625,8.625,10.750,12.750,14.000,16.000,18.000,20.000,22.000,24.000,26.000,28.000,30.000,32.000,34.000,36.000,38.000,40.000,42.000,44.000,46.000,48.000]
var SCH5=["N/A","N/A","N/A",0.065,0.065,0.065,0.065,0.065,0.065,0.083,0.083,0.083,0.083,0.109,0.109,0.109,0.134,0.156,0.156,0.165,0.165,0.188,0.188,0.218,"N/A","N/A",0.250,"N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A"]
var SCH10=[0.049,0.065,0.065,0.083,0.083,0.109,0.109,0.109,0.109,0.120,0.120,0.120,0.120,0.134,0.134,0.148,0.165,0.180,0.250,0.250,0.250,0.250,0.250,0.250,0.312,0.312,0.312,0.312,0.312,0.312,"N/A","N/A","N/A","N/A","N/A","N/A"]
var SCH20=["N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A",0.250,0.250,0.250,0.312,0.312,0.312,0.375,0.375,0.375,0.500,0.500,0.500,0.500,0.500,0.500,"N/A","N/A","N/A","N/A","N/A","N/A"]
var SCH30=[0.057,0.073,0.073,0.095,0.095,0.114,0.117,0.125,0.125,0.188,0.188,0.188,"N/A","N/A","N/A",0.277,0.307,0.330,0.375,0.375,0.438,0.500,0.500,0.562,"N/A",0.625,0.625,0.625,0.625,0.625,"N/A","N/A","N/A","N/A","N/A","N/A"]
var SCH40=[0.068,0.088,0.091,0.109,0.113,0.133,0.140,0.145,0.154,0.203,0.216,0.226,0.237,0.258,0.280,0.322,0.365,0.406,0.438,0.500,0.562,0.594,"N/A",0.688,"N/A","N/A","N/A",0.688,0.688,0.750,"N/A","N/A","N/A","N/A","N/A","N/A"]
var STD=[0.068,0.088,0.091,0.109,0.113,0.133,0.140,0.145,0.154,0.203,0.216,0.226,0.237,0.258,0.280,0.322,0.365,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375,0.375]
var SCH60=["N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A",0.406,0.500,0.562,0.594,0.656,0.750,0.812,0.875,0.969,"N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A"]
var SCH80=[0.095,0.119,0.126,0.147,0.154,0.179,0.191,0.200,0.218,0.276,0.300,0.318,0.337,0.375,0.432,0.500,0.594,0.688,0.750,0.844,0.938,1.031,1.125,1.219,"N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A"]
var XS=[0.095,0.119,0.126,0.147,0.154,0.179,0.191,0.200,0.218,0.276,0.300,0.318,0.337,0.375,0.432,0.500,0.500,0.500,0.500,0.500,0.500,0.500,0.500,0.500,0.500,0.500,0.500,0.500,0.500,0.500,0.500,0.500,0.500,0.500,0.500,0.500]
var SCH100=["N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A",0.594,0.719,0.844,0.938,1.031,1.156,1.281,1.375,1.531,"N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A"]
var SCH120=["N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A",0.438,0.500,0.562,0.719,0.844,1.000,1.094,1.219,1.375,1.500,1.625,1.812,"N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A"]
var SCH140=["N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A",0.812,1.000,1.125,1.250,1.438,1.562,1.750,1.875,2.062,"N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A"]
var SCH160=["N/A","N/A","N/A",0.188,0.219,0.250,0.250,0.281,0.344,0.375,0.438,"N/A",0.531,0.625,0.719,0.906,1.125,1.312,1.406,1.594,1.781,1.969,2.125,2.344,"N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A"]
var XXS=["N/A","N/A","N/A",0.294,0.308,0.358,0.382,0.400,0.436,0.552,0.600,"N/A",0.674,0.750,0.864,0.875,1.000,1.000,"N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A"]

</script>

</body>

</html>
